{"$product":{"name":"API AutoFlow","version":"0.2.9"},"Data":[],"File":[],"Flow":[],"FlowTest":[],"Inbound":[{"id":"<1599788363964437000.0.1374533798.4266655748.108111>","meta":{},"value":{"name":"http server","port":1111,"tls":null,"type":"http server"}}],"InboundEndpoint":[{"id":"<1599788363964797000.0.1374533798.4266655748.108113>","meta":{"index":["inbound",null]},"value":{"default-test":"<1599788363964891000.0.1374533798.4266655748.108117>","method":"GET","name":"EP1","path":"/","type":"endpoint"}},{"id":"<1599788363964793000.0.1374533798.4266655748.108112>","meta":{"index":["inbound","<1599788363964437000.0.1374533798.4266655748.108111>"]},"value":{"default-test":"<1599788363964887000.0.1374533798.4266655748.108116>","method":"GET","name":"outlook","path":"/","type":"endpoint"}},{"id":"<1599759143431580000.0.1374533798.4266655745.96143>","meta":{"index":["inbound",null]},"value":{"default-test":"<1599759143431740000.0.1374533798.4266655745.96147>","method":"GET","name":"EP1","path":"/","type":"endpoint"}}],"InboundEndpointFlow":[{"id":"<1599788363964797000.0.1374533798.4266655748.108113>","meta":{"index":["inbound",null]},"value":[{"$action":"communication/http-request","body":"","header":{},"method":"GET","mock-result":{"body":"","headers":{},"status-code":200},"name":"get aws guardduty data","output-location":{"__LDATA__":["aws_response"]},"query":{},"timeout":5000,"url":"https://autoflow-files.s3-us-west-2.amazonaws.com/guardduty+data.json","use-mock-result":false},{"$action":"json/decode","json":{"__LDATA__":["aws_response","body"]},"name":"json/decode aws response body","output-location":{"__LDATA__":["aws_response","body"]}},{"$action":"iteration/map","array":{"__LDATA__":["aws_response","body"]},"do":[{"$action":"data/set","at-location":{"__LDATA__":["value"]},"name":"set new object","value":{"aid":{"__LDATA__":["value","accountId"]},"new_region":{"__LDATA__":["value","region"]},"new_service":{"action":{"new_actionType":{"__LDATA__":["value","service","action","actionType"]}}}}},{"$action":"conditional/switch","cases":[{"do":[{"$action":"data/set","at-location":{"__LDATA__":["value","aid"]},"value":"1"}],"name":"123456789","value":"123456789"}],"default":[],"name":"change aid","target":{"__LDATA__":["value","aid"]}},{"$action":"conditional/switch","cases":[{"do":[{"$action":"data/set","at-location":{"__LDATA__":["value","new_region"]},"value":"west"}],"name":"us-west-2","value":"us-west-2"}],"default":[],"name":"change region","target":{"__LDATA__":["value","new_region"]}}],"index-location":{"__LDATA__":["index"]},"name":"iterate of aws response body","output-location":{"__LDATA__":["result"]},"value-location":{"__LDATA__":["value"]}}]},{"id":"<1599788363964793000.0.1374533798.4266655748.108112>","meta":{"index":["inbound","<1599788363964437000.0.1374533798.4266655748.108111>"]},"value":[{"$action":"communication/http-request","body":"client_id=02ea57d8-a61c-48fb-9d7a-11d8af83ab7e  &scope=https%3A%2F%2Fgraph.microsoft.com%2F.default  &client_secret=.~jEs18P7fk0.4.zNjlUU~-KorsOV.qC_Y  &grant_type=client_credentials","header":{"Content-Type":"application/x-www-form-urlencoded","Host":"login.microsoftonline.com"},"method":"POST","mock-result":{"body":"","headers":{},"status-code":200},"name":"Get Token","output-location":{"__LDATA__":["result"]},"query":{},"timeout":5000,"url":"https://login.microsoftonline.com/3fa7af3a-566e-42f8-ad22-43ca2385348a/oauth2/v2.0/token","use-mock-result":false},{"$action":"json/decode","json":{"__LDATA__":["result","body"]},"name":"Retrieve Token","output-location":{"__LDATA__":["token"]}},{"$action":"string/concatenate","another-string":{"__LDATA__":["token","access_token"]},"output-location":{"__LDATA__":["Bearer Token"]},"string":"Bearer "},{"$action":"communication/http-request","body":{},"header":{"Accept":"application/json","Authorization":{"__LDATA__":["Bearer Token"]}},"method":"GET","mock-result":{"body":"","headers":{},"status-code":200},"name":"Get Users","output-location":{"__LDATA__":["users"]},"query":{},"timeout":5000,"url":"https://graph.microsoft.com/v1.0/users/","use-mock-result":false},{"$action":"json/decode","json":{"__LDATA__":["users","body"]},"output-location":{"__LDATA__":["users","body"]}},{"$action":"string/join","array":["https://graph.microsoft.com/v1.0/users/",{"__LDATA__":["users","body","value",0,"userPrincipalName"]},"/mailFolders"],"output-location":{"__LDATA__":["url"]},"separator":""},{"$action":"communication/http-request","body":{},"header":{"Accept":"application/json","Authorization":{"__LDATA__":["Bearer Token"]}},"method":"GET","mock-result":{"body":"","headers":{},"status-code":200},"name":"Get mail folders","output-location":{"__LDATA__":["mailFolders"]},"query":{},"timeout":5000,"url":{"__LDATA__":["url"]},"use-mock-result":false},{"$action":"string/uri-url-encode","name":"string/uri-url-encode filter","output-location":{"__LDATA__":["filter"]},"string":"isRead eq false"},{"$action":"string/uri-url-encode","name":"string/uri-url-encode userPrincipalName","output-location":{"__LDATA__":["userPrincipalName"]},"string":"peter@pulzze.onmicrosoft.com"},{"$action":"string/join","array":["https://graph.microsoft.com/v1.0/users/peter@pulzze.onmicrosoft.com","/mailFolders/inbox/messages?$filter=",{"__LDATA__":["filter"]}],"name":"Create URL for getting email from inbox that are not read","output-location":{"__LDATA__":["url"]},"separator":""},{"$action":"communication/http-request","body":{},"header":{"Accept":"application/json","Authorization":{"__LDATA__":["Bearer Token"]}},"method":"GET","mock-result":{"body":"","headers":{},"status-code":200},"name":"Get Email from Inbox","output-location":{"__LDATA__":["messages"]},"query":{},"timeout":5000,"url":{"__LDATA__":["url"]},"use-mock-result":false}]},{"id":"<1599759143431580000.0.1374533798.4266655745.96143>","meta":{"index":["inbound",null]},"value":[{"$action":"communication/http-request","body":"","header":{},"method":"GET","mock-result":{"body":"","headers":{},"status-code":200},"name":"get aws guardduty data","output-location":{"__LDATA__":["aws_response"]},"query":{},"timeout":5000,"url":"https://autoflow-files.s3-us-west-2.amazonaws.com/guardduty+data.json","use-mock-result":false},{"$action":"json/decode","json":{"__LDATA__":["aws_response","body"]},"name":"json/decode aws response body","output-location":{"__LDATA__":["aws_response","body"]}},{"$action":"iteration/map","array":{"__LDATA__":["aws_response","body"]},"do":[{"$action":"data/set","at-location":{"__LDATA__":["value"]},"name":"set new object","value":{"aid":{"__LDATA__":["value","accountId"]},"new_region":{"__LDATA__":["value","region"]},"new_service":{"action":{"new_actionType":{"__LDATA__":["value","service","action","actionType"]}}}}},{"$action":"conditional/switch","cases":[{"do":[{"$action":"data/set","at-location":{"__LDATA__":["value","aid"]},"value":"1"}],"name":"123456789","value":"123456789"}],"default":[],"name":"change aid","target":{"__LDATA__":["value","aid"]}},{"$action":"conditional/switch","cases":[{"do":[{"$action":"data/set","at-location":{"__LDATA__":["value","new_region"]},"value":"west"}],"name":"us-west-2","value":"us-west-2"}],"default":[],"name":"change region","target":{"__LDATA__":["value","new_region"]}}],"index-location":{"__LDATA__":["index"]},"name":"iterate of aws response body","output-location":{"__LDATA__":["result"]},"value-location":{"__LDATA__":["value"]}}]}],"InboundEndpointTest":[{"id":"<1599788363964887000.0.1374533798.4266655748.108116>","meta":{"index":["inbound","<1599788363964437000.0.1374533798.4266655748.108111>","endpoint","<1599788363964793000.0.1374533798.4266655748.108112>"]},"value":{"name":"default-test-input","request":{"body":"","header":{},"path":{},"query":{}}}},{"id":"<1599788363964891000.0.1374533798.4266655748.108117>","meta":{"index":["inbound",null,"endpoint","<1599788363964797000.0.1374533798.4266655748.108113>"]},"value":{"name":"default-test-input","request":{"body":"","header":{},"path":{},"query":{}}}},{"id":"<1599759143431740000.0.1374533798.4266655745.96147>","meta":{"index":["inbound",null,"endpoint","<1599759143431580000.0.1374533798.4266655745.96143>"]},"value":{"name":"default-test-input","request":{"body":"","header":{},"path":{},"query":{}}}}],"Schema":[],"SchemaEntry":[],"Timer":[],"TimerFlow":[],"Variable":[]}